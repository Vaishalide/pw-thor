<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Batch Viewer</title>
  <style>
    body { font-family: sans-serif; }
    .batch, .subject, .chapter, .lecture {
      margin: 10px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      display: inline-block;
      vertical-align: top;
    }
    img { max-width: 200px; height: auto; display: block; }
    h2, h3, h4 { margin: 5px 0; }
  </style>
</head>
<body>

  <h1>Batches</h1>
  <div id="batches"></div>
  <hr>
  <div id="subjects"></div>
  <div id="chapters"></div>
  <div id="lectures"></div>

  <script>
    // Load batches
    fetch('https://5f129b41-01f2-4d5a-8f1c-6dcb49be4165-00-8xnq81j897xt.pike.replit.dev/api/batches')
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById('batches');
        data.forEach(batch => {
          const div = document.createElement('div');
          div.className = 'batch';
          div.innerHTML = `
            <img src="${batch.image}" alt="${batch.name}">
            <h2>${batch.name}</h2>
            <button onclick="loadSubjects('${batch.url}')">View Subjects</button>
          `;
          container.appendChild(div);
        });
      });

    function loadSubjects(batchUrl) {
      document.getElementById('subjects').innerHTML = '';
      document.getElementById('chapters').innerHTML = '';
      document.getElementById('lectures').innerHTML = '';
      fetch('https://5f129b41-01f2-4d5a-8f1c-6dcb49be4165-00-8xnq81j897xt.pike.replit.dev/api/subjects?url=' + encodeURIComponent(batchUrl))
        .then(res => res.json())
        .then(subjects => {
          const container = document.getElementById('subjects');
          container.innerHTML = '<h2>Subjects</h2>';
          subjects.forEach(subject => {
            const div = document.createElement('div');
            div.className = 'subject';
            div.innerHTML = `
              <h3>${subject.name}</h3>
              <button onclick="loadChapters('${subject.url}')">View Chapters</button>
            `;
            container.appendChild(div);
          });
        });
    }

    function loadChapters(subjectUrl) {
      document.getElementById('chapters').innerHTML = '';
      document.getElementById('lectures').innerHTML = '';
      fetch('https://5f129b41-01f2-4d5a-8f1c-6dcb49be4165-00-8xnq81j897xt.pike.replit.dev/api/chapters?url=' + encodeURIComponent(subjectUrl))
        .then(res => res.json())
        .then(chapters => {
          const container = document.getElementById('chapters');
          container.innerHTML = '<h3>Chapters</h3>';
          chapters.forEach(chapter => {
            const div = document.createElement('div');
            div.className = 'chapter';
            div.innerHTML = `
              <h4>${chapter.name}</h4>
              <button onclick="loadLectures('${chapter.url}')">View Lectures</button>
            `;
            container.appendChild(div);
          });
        });
    }

    function loadLectures(chapterUrl) {
      document.getElementById('lectures').innerHTML = '';
      fetch('https://5f129b41-01f2-4d5a-8f1c-6dcb49be4165-00-8xnq81j897xt.pike.replit.dev/api/lectures?url=' + encodeURIComponent(chapterUrl))
        .then(res => res.json())
        .then(lectures => {
          const container = document.getElementById('lectures');
          container.innerHTML = '<h4>Lectures</h4>';
          lectures.forEach(lec => {
            const div = document.createElement('div');
            div.className = 'lecture';
            div.innerHTML = `
              <img src="${lec.thumbnail}" alt="${lec.title}">
              <p>${lec.title}</p>
              <a href="${lec.url}" target="_blank">Open Lecture</a>
            `;
            container.appendChild(div);
          });
        });
    }
  </script>

</body>
</html>
